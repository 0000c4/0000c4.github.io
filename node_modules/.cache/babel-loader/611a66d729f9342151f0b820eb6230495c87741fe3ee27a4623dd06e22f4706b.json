{"ast":null,"code":"import React,{useState,useContext,useEffect,useMemo}from'react';import{observer}from'mobx-react-lite';import Context from'../index';import{emailValidation,passwordValidation}from'../utils/validation';import styles from'./LoginForm.module.css';import Ninput from'../UI/Ninput/Ninput';import SpanButton from'../UI/Buttons/SpanButton/SpanButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(_ref){let{isActive,setActive,setRegForm}=_ref;const{store}=useContext(Context);const[userLogin,setUserLogin]=useState({email:\"\",password:\"\"});const[error,setError]=useState({password:'password is empty',email:'email is empty'});const[loginButton,setLoginButton]=useState(false);const[resetPassword,setResetPassword]=useState(true);const[successEmail,setSuccessEmail]=useState(false);let style=styles.LoginForm;if(isActive===true){style+=' '+styles.active;}const loginButtonFunc=async()=>{console.log(error);console.log(error.password!=\"\"||error.email!=\"\");if(error.password!=\"\"||error.email!=\"\"){setLoginButton(true);}else{const externalError=await store.login(userLogin.email,userLogin.password);if(typeof externalError!=\"undefined\"){setLoginButton(true);setError({...error,password:externalError.message});}else{setActive(false);}}};const sendButtonFunc=async()=>{if(error.email!=\"\"){setLoginButton(true);}else{const externalError=await store.sendResetPasswordEmail(userLogin.email);if(typeof externalError!=\"undefined\"){setLoginButton(true);setError({...error,email:externalError.message});}else{setSuccessEmail(true);}}};return resetPassword?/*#__PURE__*/ //!\n_jsxs(\"div\",{className:style,children:[/*#__PURE__*/_jsx(Ninput,{placeholder:\"email\",value:userLogin.email,onChange:e=>{setLoginButton(false);setUserLogin({...userLogin,email:e.target.value});emailValidation(e.target.value,setError,error);}}),loginButton&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error.email}),/*#__PURE__*/_jsx(Ninput,{placeholder:\"password\",type:\"password\",value:userLogin.password,onChange:e=>{setLoginButton(false);setUserLogin({...userLogin,password:e.target.value});passwordValidation(e.target.value,setError,error);}}),loginButton&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error.password}),/*#__PURE__*/_jsxs(\"div\",{className:styles.LoginForm__buttons,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.LoginForm__buttons_block,children:[/*#__PURE__*/_jsx(SpanButton,{onClick:()=>{loginButtonFunc();},children:\"Login\"}),\"\\u2800or\\u2800\",/*#__PURE__*/_jsx(\"a\",{onClick:()=>{setRegForm(true);},className:styles.loginForm__link,children:\"Sign up\"})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.loginForm__link,onClick:()=>{setResetPassword(false);},children:\"Forgot password?\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:style,children:[/*#__PURE__*/_jsx(Ninput,{placeholder:\"email\",value:userLogin.email,onChange:e=>{setLoginButton(false);setUserLogin({...userLogin,email:e.target.value});emailValidation(e.target.value,setError,error);}}),loginButton&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error.email}),/*#__PURE__*/_jsx(\"span\",{children:\"We will send a password reset link to your email\"}),/*#__PURE__*/_jsx(SpanButton,{style:{marginTop:\"12px\"},onClick:()=>{sendButtonFunc();},children:\"Send\"}),successEmail&&/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",width:\"100%\",height:\"100%\",backgroundColor:\"rgb(238, 243, 249)\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"reset password link was sent successfully\"}),/*#__PURE__*/_jsx(SpanButton,{style:{marginTop:\"12px\"},onClick:()=>{setResetPassword(true);setActive(false);},children:\"Confirm\"})]})]});}export default observer(LoginForm);","map":{"version":3,"names":["React","useState","useContext","useEffect","useMemo","observer","Context","emailValidation","passwordValidation","styles","Ninput","SpanButton","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","isActive","setActive","setRegForm","store","userLogin","setUserLogin","email","password","error","setError","loginButton","setLoginButton","resetPassword","setResetPassword","successEmail","setSuccessEmail","style","active","loginButtonFunc","console","log","externalError","login","message","sendButtonFunc","sendResetPasswordEmail","className","children","placeholder","value","onChange","e","target","color","type","LoginForm__buttons","LoginForm__buttons_block","onClick","loginForm__link","marginTop","position","width","height","backgroundColor","display","flexDirection","alignItems"],"sources":["C:/Users/vasja/coding/notes_pwa/src/components/LoginForm.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect, useMemo } from 'react';\r\nimport { observer } from 'mobx-react-lite'\r\nimport Context from '../index';\r\nimport { emailValidation, passwordValidation } from '../utils/validation'\r\nimport styles from './LoginForm.module.css'\r\nimport Ninput from '../UI/Ninput/Ninput';\r\nimport SpanButton from '../UI/Buttons/SpanButton/SpanButton';\r\nfunction LoginForm({ isActive, setActive, setRegForm }) {\r\n\r\n    const { store } = useContext(Context);\r\n\r\n    const [userLogin, setUserLogin] = useState({ email: \"\", password: \"\" })\r\n    const [error, setError] = useState({ password: 'password is empty', email: 'email is empty' });\r\n    const [loginButton, setLoginButton] = useState(false);\r\n    const [resetPassword, setResetPassword] = useState(true);\r\n    const [successEmail, setSuccessEmail] = useState(false);\r\n    let style = styles.LoginForm;\r\n    if (isActive === true) { style += ' ' + styles.active; }\r\n\r\n    const loginButtonFunc = async () => {\r\n        console.log(error)\r\n        console.log(error.password != \"\" || error.email != \"\")\r\n        if (error.password != \"\" || error.email != \"\") {\r\n            setLoginButton(true);\r\n        }\r\n        else {\r\n            const externalError = await store.login(userLogin.email, userLogin.password);\r\n            if (typeof externalError != \"undefined\") {\r\n                setLoginButton(true);\r\n                setError({ ...error, password: externalError.message })\r\n            }\r\n            else { setActive(false) }\r\n        }\r\n    }\r\n\r\n    const sendButtonFunc = async () => {\r\n        if (error.email != \"\") {\r\n            setLoginButton(true);\r\n        }\r\n        else {\r\n            const externalError = await store.sendResetPasswordEmail(userLogin.email);\r\n            if (typeof externalError != \"undefined\") {\r\n                setLoginButton(true);\r\n                setError({ ...error, email: externalError.message })\r\n            }\r\n            else {\r\n                \r\n                \r\n                setSuccessEmail(true)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        resetPassword ?//!\r\n            <div className={style}>\r\n                <Ninput placeholder=\"email\"\r\n                    value={userLogin.email}\r\n                    onChange={(e) => {\r\n                        setLoginButton(false);\r\n                        setUserLogin({ ...userLogin, email: e.target.value, });\r\n                        emailValidation(e.target.value, setError, error)\r\n                    }}\r\n                ></Ninput>\r\n                {loginButton && <div style={{ color: \"red\" }}>{error.email}</div>}\r\n                <Ninput placeholder=\"password\"\r\n                    type=\"password\"\r\n                    value={userLogin.password}\r\n                    onChange={(e) => {\r\n                        setLoginButton(false);\r\n                        setUserLogin({ ...userLogin, password: e.target.value })\r\n                        passwordValidation(e.target.value, setError, error)\r\n                    }}\r\n                ></Ninput>\r\n                {loginButton && <div style={{ color: \"red\" }}>{error.password}</div>}\r\n\r\n\r\n                <div className={styles.LoginForm__buttons}>\r\n                    <div className={styles.LoginForm__buttons_block}>\r\n                        <SpanButton onClick={() => { loginButtonFunc() }}>Login</SpanButton>\r\n                        ⠀or⠀<a onClick={() => { setRegForm(true) }} className={styles.loginForm__link} >Sign up</a>\r\n                    </div>\r\n                    <span className={styles.loginForm__link} onClick={() => { setResetPassword(false) }}>Forgot password?</span>\r\n                </div>\r\n            </div>\r\n            :\r\n            <div className={style}>\r\n                <Ninput placeholder=\"email\"\r\n                    value={userLogin.email}\r\n                    onChange={(e) => {\r\n                        setLoginButton(false);\r\n                        setUserLogin({ ...userLogin, email: e.target.value, });\r\n                        emailValidation(e.target.value, setError, error)\r\n                    }}\r\n                ></Ninput>\r\n                {loginButton && <div style={{ color: \"red\" }}>{error.email}</div>}\r\n                <span>We will send a password reset link to your email</span>\r\n                <SpanButton style={{ marginTop: \"12px\" }} onClick={() => { sendButtonFunc() }}>Send</SpanButton>\r\n                {successEmail &&\r\n                    <div style={{ position: \"absolute\", width: \"100%\", height: \"100%\", backgroundColor: \"rgb(238, 243, 249)\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\"}}>\r\n                        <span>reset password link was sent successfully</span>\r\n                        <SpanButton style={{ marginTop: \"12px\" }} onClick={() => { setResetPassword(true);setActive(false); }}>Confirm</SpanButton>\r\n                    </div>}\r\n            </div>\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default observer(LoginForm);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}